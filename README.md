# EduSchedule - Платформа управления расписанием для образовательных учреждений

Мультитенантная SaaS-платформа для управления расписанием университетов, колледжей и школ с красивым UI/UX.

## 🎯 Концепция

EduSchedule - это платформа, которую образовательные учреждения могут использовать для публикации и управления расписанием своих студентов. Каждая организация имеет собственную панель управления с возможностью создания филиалов и полным контролем над своими данными.

## 🎨 Особенности дизайна

- **Снижение когнитивной нагрузки**: Off-white фон (#F3F4F6) вместо чистого белого
- **Современная цветовая палитра**: Глубокий индиго (Telegram-inspired) для акцентов
- **Семантические цвета**: Пастельные подложки для типов занятий (лекция, практика, лабораторная)
- **Минималистичная сетка**: Едва заметные линии, разделение через отступы и тени
- **Темная тема**: Полная поддержка светлой и темной темы
- **Адаптивный дизайн**: Идеально работает на всех устройствах

## 📋 Функциональность

### Для студентов 👨‍🎓

#### Поиск расписания (Публичный доступ)
1. **Выбор города** - Выбор города обучения из списка крупных городов России
2. **Выбор учреждения** - Поиск и выбор университета/колледжа/школы с фильтрацией по типу
3. **Выбор филиала** - Если у учреждения несколько филиалов
4. **Просмотр расписания** - Поиск группы и просмотр расписания

**Возможности просмотра:**
- Переключение между нечетной/четной неделей
- Адаптивная таблица (десктоп) / карточки (мобильные)
- Детальная информация о каждом занятии
- Темная/светлая тема
- Экспорт расписания

### Для организаций 🏢

#### Регистрация организации
- **Тип учреждения**: Университет/Колледж/Школа
- **Основная информация**: Название, город, контакты
- **Создание аккаунта**: Email и пароль администратора

#### Панель администратора организации

##### 1. Управление филиалами
- Создание/редактирование/удаление филиалов
- Управление контактной информацией
- Активация/деактивация филиалов
- Поиск по филиалам

##### 2. Редактор расписания
- **Drag & Drop интерфейс**: Перетаскивание занятий
- **Валидация конфликтов**: Автоматическая проверка накладок
- **Быстрое редактирование**: Модальные окна
- **Копирование**: Дублирование недель

##### 3. Справочники
- **Группы**: Управление учебными группами
- **Преподаватели**: База преподавателей с предпочтениями
- **Аудитории**: Кабинеты с вместимостью и типом
- **Предметы**: Список дисциплин

##### 4. Аналитика
- **Загруженность аудиторий**: Процент использования
- **Нагрузка преподавателей**: Часы в неделю
- **Распределение занятий**: По дням и типам
- **Графики**: Визуализация данных

##### 5. Настройки
- **Временные слоты**: Расписание звонков
- **Тема**: Светлая/темная
- **Системные параметры**: Общие настройки

## 🚀 Технологии

- **React 19** + **TypeScript**
- **Vite** - Быстрая сборка
- **Tailwind CSS** - Utility-first CSS
- **React Router** - Навигация
- **Recharts** - Графики и визуализация
- **DnD Kit** - Drag & Drop
- **Lucide React** - Иконки
- **date-fns** - Работа с датами

## 🧠 Backend API (server/)

Для полноценного использования UI добавлен backend на **Node.js 20 + NestJS 11**:

- **NestJS + Passport.js**: Local стратегия для логина и JWT для защищённых эндпоинтов
- **PostgreSQL + Prisma ORM**: типобезопасные модели организаций, филиалов и версий расписаний
- **class-validator / class-transformer**: строгая валидация DTO
- **Docker Compose**: Postgres + pgAdmin (порт 8081)
- **Jest**: модульные тесты (проверка критичной логики расписаний)

### Быстрый старт backend

```bash
cd server
npm install
copy env.example .env          # укажите DATABASE_URL, JWT_SECRET
docker compose up -d postgres  # требует установленный Docker
npm run prisma:migrate         # применить схему
npm run start:dev
```

> Примечание: на текущем окружении Docker недоступен, поэтому Postgres нужно запускать локально, либо использовать облачную БД. DATABASE_URL можно передать через переменные окружения при запуске `prisma` и NestJS.

## ⚡️ Краткая инструкция по запуску всего проекта

1. **Установите зависимости и сконфигурируйте backend**
   ```bash
   cd server
   npm install
   copy .env.example .env          # пропишите DATABASE_URL, JWT_SECRET
   docker compose up -d postgres   # либо поднимите собственный PostgreSQL
   npx prisma migrate dev          # создаёт таблицы и генерирует Prisma Client
   npm run start:dev               # API будет на http://localhost:4000
   ```

2. **Настройте frontend**
   ```bash
   cd ..
   npm install
   copy .env.example .env          # добавьте VITE_API_URL=http://localhost:4000/api
   npm run dev                     # SPA поднимется на http://localhost:5173
   ```

3. **Авторизация**
   - Зарегистрируйте первую организацию на `/register` (создаст org admin + филиал).
   - После логина станут доступны `/org-admin/branches`, `/org-admin/schedules`, `/data` и другие защищённые страницы.

> Если Docker недоступен, можно использовать локальный PostgreSQL (порт 5432) либо любой внешний DBaaS — главное, чтобы `DATABASE_URL` совпадал для `prisma` и NestJS.

### Настройка frontend

Создайте `.env` в корне фронтенда со строкой:

```
VITE_API_URL=http://localhost:4000/api
```

Это позволит приложению обращаться к NestJS API (по умолчанию порт 4000).

## 📦 Установка и запуск

```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build

# Предпросмотр продакшен-сборки
npm run preview

# Backend
cd server
npm install
npm run start:dev
```

## 🎯 Структура проекта

```
src/
├── components/          # Переиспользуемые компоненты
│   ├── Button.tsx
│   ├── Card.tsx
│   ├── Modal.tsx
│   ├── Input.tsx
│   ├── Layout.tsx       # Административная панель с навигацией
│   ├── SearchBar.tsx
│   ├── LessonCard.tsx
│   └── EmptyState.tsx
├── pages/              # Страницы приложения
│   ├── CitySelectionPage.tsx           # Выбор города (студенты)
│   ├── OrganizationSelectionPage.tsx   # Выбор учреждения (студенты)
│   ├── BranchSelectionPage.tsx         # Выбор филиала (студенты)
│   ├── StudentSchedulePage.tsx         # Просмотр расписания (студенты)
│   ├── OrganizationRegistrationPage.tsx # Регистрация организации
│   ├── BranchManagementPage.tsx        # Управление филиалами (админ)
│   ├── ViewerPage.tsx                  # Просмотр расписания (админ)
│   ├── AdminPage.tsx                   # Редактор расписания
│   ├── DataPage.tsx                    # Справочники
│   ├── AnalyticsPage.tsx               # Аналитика
│   └── SettingsPage.tsx                # Настройки
├── contexts/           # React контексты
│   ├── ThemeContext.tsx
│   └── AuthContext.tsx
├── hooks/
│   └── useAuth.ts      # Хук авторизации
├── api/                # Работа с REST API
│   ├── auth.ts         # /auth/*
│   ├── public.ts       # /public/*
│   ├── branches.ts     # /branches/*
│   └── schedules.ts    # /schedules/*
├── types/              # TypeScript типы
│   └── types.ts        # Все типы данных
├── utils/              # Утилиты
│   ├── cn.ts           # Класс-хелпер
│   └── mockData.ts     # Демонстрационные данные расписания (используются в StudentSchedulePage)
├── App.tsx             # Главный компонент и роутинг
├── main.tsx            # Точка входа
└── index.css           # Глобальные стили
```

## 🎨 Дизайн-система

### Цвета

```css
/* Brand */
--brand-500: #6366f1  /* Основной цвет бренда */

/* Семантические цвета занятий */
--lecture-light: #fef3c7
--lecture: #f59e0b

--practice-light: #d1fae5
--practice: #059669

--lab-light: #e9d5ff
--lab: #7c3aed

/* Нейтральные */
--gray-50: #F3F4F6   /* Off-white фон */
```

### Типографика

- **Основной шрифт**: Inter (San Serif)
- **Моноширинный**: JetBrains Mono (для времени и номеров)

### Компоненты

- **Карточки**: border-radius: 12px, тонкая тень
- **Кнопки**: Плоские, без градиентов
- **Модальные окна**: Backdrop blur для фокуса

## 📱 Адаптивность

- **Десктоп** (1024px+): Полная таблица с sticky header
- **Планшет** (768px-1023px): Адаптивная сетка
- **Мобильный** (<768px): Вертикальные карточки, мобильное меню

## 🔒 Безопасность

- TypeScript для типобезопасности
- Валидация данных
- Защита от конфликтов в расписании

## 🚦 Маршруты

### Публичные (Студенты)
- `/` - Выбор города
- `/student/organization-selection?city={id}` - Выбор учреждения
- `/student/branch-selection?org={id}` - Выбор филиала
- `/student/schedule` - Просмотр расписания

### Регистрация
- `/register` - Регистрация организации

### Административные (с Layout)
- `/org-admin/branches` - Управление филиалами
- `/viewer` - Просмотр расписания
- `/admin` - Редактор расписания
- `/data` - Справочники
- `/analytics` - Аналитика
- `/settings` - Настройки

## 🌟 Будущие улучшения

### Backend и безопасность
- [ ] REST API / GraphQL backend
- [ ] PostgreSQL база данных
- [ ] JWT аутентификация
- [ ] Роли и права доступа
- [ ] Многоуровневая безопасность

### Функциональность
- [ ] Реальный экспорт в PDF/iCal/Excel
- [ ] Email/Push уведомления об изменениях
- [ ] История изменений расписания
- [ ] Импорт данных (Excel/CSV)
- [ ] Комментарии к занятиям
- [ ] Интеграция с календарями (Google, Outlook)

### Биллинг и монетизация
- [ ] Система подписок
- [ ] Тарифные планы
- [ ] Интеграция с платежными системами (Stripe, ЮKassa)
- [ ] Биллинг-дашборд для супер-админа

### Дополнительно
- [ ] Мобильное приложение (React Native)
- [ ] Мультиязычность
- [ ] White-label решения
- [ ] API для интеграций

## 👥 Команда

Разработано с ❤️ командой EduSchedule

## 📚 Документация

Подробная архитектура системы описана в [ARCHITECTURE.md](./ARCHITECTURE.md)

## 📄 Лицензия

Проприетарное ПО
